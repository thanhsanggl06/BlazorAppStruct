?? Hý?ng D?n Chi Ti?t Project Blazor WebAssembly\n\n## ?? M?c L?c\n1. T?ng Quan Project\n2. Ki?n Trúc H? Th?ng\n3. C?u Trúc Thý M?c\n4. Lu?ng Ho?t Ð?ng\n5. Chi Ti?t T?ng Layer\n6. Cách Code Theo Quy Chu?n\n7. Th?c Hành: Thêm Ch?c Nãng M?i\n8. Tips & Best Practices\n\n---\n\n## 1. T?ng Quan Project\n\n### ?? Project này là g??\n\nÐây là m?t ?ng d?ng web s? d?ng Blazor WebAssembly (WASM) v?i ki?n trúc Clean Architecture ðý?c t? ch?c thành nhi?u layer riêng bi?t.\n\nBlazor WebAssembly là g??\n- Cho phép ch?y C# tr?c ti?p trên tr?nh duy?t (không c?n JavaScript)\n- Client-side rendering: giao di?n ch?y hoàn toàn ? phía client\n- Giao ti?p v?i server qua HTTP API\n\n### ?? Công Ngh? S? D?ng\n\n| Công ngh? | Phiên b?n | M?c ðích |\n|-----------|-----------|----------|\n| .NET | 9.0 | Framework chính |\n| Blazor WebAssembly | 9.0 | Frontend (Client-side) |\n| ASP.NET Core Web API | 9.0 | Backend API |\n| Entity Framework Core | 9.0 | ORM ð? làm vi?c v?i Database |\n| SQL Server | Latest | Database |\n| Swagger | 9.0 | API Documentation |\n\n---\n\n## 2. Ki?n Trúc H? Th?ng\n\n### ?? Sõ Ð? Ki?n Trúc T?ng Th?\n\nmermaid\ngraph TB\n subgraph \"Client Browser\"\n UI[Blazor WASM UI]\n end\n \n subgraph \"Server (.NET 9)\"\n API[ASP.NET Core API Controllers]\n MW[Middlewares]\n SVC[Business Logic Services]\n DB_CTX[EF Core DbContext]\n end\n \n subgraph \"Database\"\n SQL[(SQL Server)]\n end\n \n UI -->|HTTP Requests| MW\n MW --> API\n API --> SVC\n SVC --> DB_CTX\n DB_CTX -->|SQL Queries| SQL\n \n style UI fill:#e1f5ff\n style API fill:#fff4e1\n style SVC fill:#e8f5e9\n style SQL fill:#fce4ec\n\n\n### ?? Ki?n Trúc Multi-Project (Clean Architecture)\n\nmermaid\ngraph LR\n Client[Client Project<br/>Blazor WASM] --> Shared[Shared Project<br/>DTOs & Entities]\n Server[Server Project<br/>ASP.NET Core API] --> Shared\n Server --> Services[Services Project<br/>Business Logic]\n Server --> Data[Data Project<br/>EF Core]\n Services --> Data\n Services --> Shared\n Data --> Shared\n \n style Client fill:#4fc3f7\n style Server fill:#ff9800\n style Services fill:#66bb6a\n style Data fill:#ab47bc\n style Shared fill:#ffd54f\n\n\n### ?? Gi?i Thích T?ng Layer\n\n| Layer | Vai tr? | Ví d? |\n|-------|---------|-------|\n| Client | Giao di?n ngý?i dùng (UI) | Các trang .razor, components, layout |\n| Server | API endpoints, middleware | Controllers, Program.cs |\n| Services | Business logic, x? l? nghi?p v? | TodoService - x? l? logic Todo |\n| Data | Truy c?p database | DbContext, Migrations |\n| Shared | Code dùng chung | DTOs, Entity models |\n\n---\n\n## 3. C?u Trúc Thý M?c\n\n### ?? Chi Ti?t C?u Trúc\n\n\nBlazorAppStruct/\n?\n??? ?? Client/ # Blazor WebAssembly App\n? ??? ?? Pages/ # Các trang Razor\n? ? ??? Home.razor # Trang ch?\n? ? ??? Todos.razor # Trang qu?n l? Todo\n? ? ??? Weather.razor # Trang Weather demo\n? ??? ?? Layout/ # Giao di?n layout\n? ? ??? MainLayout.razor # Layout chính\n? ? ??? NavMenu.razor # Menu ði?u hý?ng\n? ??? ?? wwwroot/ # Static files (CSS, JS, images)\n? ??? _Imports.razor # Import chung cho t?t c? .razor\n? ??? App.razor # Root component\n? ??? Program.cs # Entry point c?a Client\n? ??? Client.csproj # Project file\n?\n??? ?? Server/ # ASP.NET Core API\n? ??? ?? Controllers/ # API Controllers\n? ? ??? TodosController.cs # API endpoints cho Todo\n? ??? ?? Middlewares/ # Custom middlewares\n? ? ??? RequestClientInfoMiddleware.cs\n? ??? ?? Properties/\n? ? ??? launchSettings.json # C?u h?nh ch?y app\n? ??? Program.cs # C?u h?nh server, DI, middleware\n? ??? appsettings.json # Configuration (connection strings)\n? ??? Server.csproj\n?\n??? ?? Services/ # Business Logic Layer\n? ??? ?? Interfaces/ # Interfaces\n? ? ??? ITodoService.cs\n? ??? ?? Implements/ # Implementations\n? ? ??? TodoService.cs # Logic x? l? Todo\n? ??? Services.csproj\n?\n??? ?? Data/ # Data Access Layer\n? ??? AppDbContext.cs # EF Core DbContext\n? ??? ?? Migrations/ # Database migrations\n? ??? Data.csproj\n?\n??? ?? Shared/ # Shared Code\n? ??? ?? Entities/\n? ? ??? ?? Table/ # Database entities\n? ? ? ??? TodoItem.cs\n? ? ??? ?? Dtos/ # Data Transfer Objects\n? ? ??? TodoItemDto.cs\n? ??? Shared.csproj\n?\n??? ?? Docs/ # Documentation\n ??? Project_Guide.md # File này!\n\n\n---\n\n## 4. Lu?ng Ho?t Ð?ng\n\n### ?? Lu?ng Request-Response Ð?y Ð?\n\nmermaid\nsequenceDiagram\n participant User as ?? User\n participant Browser as ?? Browser<br/>(Blazor WASM)\n participant Server as ??? Server<br/>(ASP.NET Core)\n participant Middleware as ??? Middleware\n participant Controller as ?? Controller\n participant Service as ?? Service\n participant DbContext as ??? DbContext\n participant Database as ??? SQL Server\n \n User->>Browser: Click \"Add Todo\"\n Browser->>Browser: Call AddAsync() method\n Browser->>Server: POST /api/todos<br/>{Title: \"New task\"}\n \n Server->>Middleware: RequestClientInfoMiddleware\n Middleware->>Middleware: Get IP, Hostname\n Middleware->>Controller: Forward request\n \n Controller->>Controller: Validate input\n Controller->>Service: CreateAsync(request)\n Service->>DbContext: Add(new TodoItem)\n DbContext->>Database: INSERT INTO TodoItems\n Database-->>DbContext: Success (Id=1)\n DbContext-->>Service: Entity with Id\n Service-->>Controller: TodoItemDto\n Controller-->>Server: 201 Created\n Server-->>Browser: JSON Response\n Browser->>Browser: Update UI\n Browser-->>User: Show new todo\n\n\n### ?? Gi?i Thích Chi Ti?t T?ng Bý?c\n\n#### Bý?c 1: User Týõng Tác\nrazor\n\n<button class=\"btn btn-primary\" @onclick=\"AddAsync\">Add</button>\n\n\n#### Bý?c 2: Blazor Component X? L?\ncsharp\nprivate async Task AddAsync()\n{\n // 1. Validate input\n if (string.IsNullOrWhiteSpace(newTitle)) return;\n \n // 2. T?o request object\n var req = new CreateTodoRequest(newTitle);\n \n // 3. G?i HTTP POST ð?n server\n var res = await Http.PostAsJsonAsync(\"api/todos\", req);\n \n // 4. X? l? response\n if (res.IsSuccessStatusCode)\n {\n var created = await res.Content.ReadFromJsonAsync<TodoItemDto>();\n todos.Insert(0, created); // Update UI\n newTitle = string.Empty; // Clear input\n }\n}\n\n\n#### Bý?c 3: Request Ð?n Server\n\nRequest HTTP:\n\nPOST https://localhost:7001/api/todos\nContent-Type: application/json\n\n{\n \"title\": \"Buy groceries\"\n}\n\n\n#### Bý?c 4: Middleware X? L?\ncsharp\n// RequestClientInfoMiddleware.cs\npublic async Task InvokeAsync(HttpContext context)\n{\n // L?y IP address c?a client\n string? ipString = GetClientIp(context.Request);\n \n // Reverse DNS lookup ð? l?y hostname\n string? hostname = await GetHostnameAsync(ipString);\n \n // Lýu vào HttpContext.Items\n context.Items[\"ClientIp\"] = ipString;\n context.Items[\"ClientHost\"] = hostname;\n \n // Ti?p t?c pipeline\n await _next(context);\n}\n\n\n#### Bý?c 5: Controller Nh?n Request\ncsharp\n[HttpPost]\npublic async Task<ActionResult<TodoItemDto>> Create(\n [FromBody] CreateTodoRequest request, \n CancellationToken ct)\n{\n // 1. Validate\n if (string.IsNullOrWhiteSpace(request.Title)) \n return BadRequest(\"Title is required.\");\n \n // 2. G?i service\n var created = await service.CreateAsync(request, ct);\n \n // 3. Return 201 Created v?i Location header\n return CreatedAtAction(nameof(GetById), new { id = created.Id }, created);\n}\n\n\n#### Bý?c 6: Service X? L? Business Logic\ncsharp\npublic async Task<TodoItemDto> CreateAsync(CreateTodoRequest request, CancellationToken ct)\n{\n // 1. T?o entity t? request\n var entity = new TodoItem\n {\n Title = request.Title.Trim(), // Clean data\n IsDone = false,\n CreatedAt = DateTime.UtcNow\n };\n \n // 2. Thêm vào DbContext\n db.TodoItems.Add(entity);\n \n // 3. Save changes (INSERT vào database)\n await db.SaveChangesAsync(ct);\n \n // 4. Map entity sang DTO và return\n return new TodoItemDto(entity.Id, entity.Title, entity.IsDone, entity.CreatedAt);\n}\n\n\n#### Bý?c 7: DbContext & Database\ncsharp\n// Entity Framework t?o SQL query t? ð?ng:\nINSERT INTO TodoItems (Title, IsDone, CreatedAt)\nVALUES ('Buy groceries', 0, '2024-01-15 10:30:00')\n\n-- SQL Server tr? v? Id c?a record m?i (Identity column)\n\n\n#### Bý?c 8: Response Tr? V? Client\njson\nHTTP/1.1 201 Created\nLocation: /api/todos/1\nContent-Type: application/json\n\n{\n \"id\": 1,\n \"title\": \"Buy groceries\",\n \"isDone\": false,\n \"createdAt\": \"2024-01-15T10:30:00Z\"\n}\n\n\n---\n\n## 5. Chi Ti?t T?ng Layer\n\n### ?? 5.1. Client Layer (Blazor WebAssembly)\n\n#### ?? C?u Trúc File Razor Component\n\nrazor\n@page \"/todos\" \n@inject HttpClient Http \n@using Shared.Entities.Dtos \n\n\n<h3>Todos</h3>\n<input @bind=\"newTitle\" />\n<button @onclick=\"AddAsync\">Add</button>\n\n@if (loading)\n{\n <p>Loading...</p>\n}\nelse\n{\n @foreach (var todo in todos)\n {\n <div>@todo.Title</div>\n }\n}\n\n\n@code {\n // Properties\n private List<TodoItemDto> todos = new();\n private string? newTitle;\n private bool loading;\n \n // Lifecycle method\n protected override async Task OnInitializedAsync()\n {\n await LoadAsync();\n }\n \n // Event handlers\n private async Task AddAsync() { /* ... */ }\n private async Task LoadAsync() { /* ... */ }\n}\n\n\n#### ?? Program.cs - C?u H?nh Client\n\ncsharp\nvar builder = WebAssemblyHostBuilder.CreateDefault(args);\n\n// Ðãng k? root component\nbuilder.RootComponents.Add<App>(\"#app\");\nbuilder.RootComponents.Add<HeadOutlet>(\"head::after\");\n\n// Ðãng k? HttpClient v?i base address t? ð?ng\nbuilder.Services.AddScoped(sp => \n new HttpClient { \n BaseAddress = new Uri(builder.HostEnvironment.BaseAddress) \n });\n\nawait builder.Build().RunAsync();\n\n\nGi?i thích:\n- App component s? ðý?c render vào element có id="app" trong index.html\n- HttpClient t? ð?ng bi?t base URL (ví d?: https://localhost:7001)\n- Khi g?i Http.GetAsync(\"api/todos\") ? https://localhost:7001/api/todos\n\n---\n\n### ??? 5.2. Server Layer (ASP.NET Core API)\n\n#### ?? Program.cs - C?u H?nh Server\n\ncsharp\nvar builder = WebApplication.CreateBuilder(args);\n\n// === 1. Ðãng K? Services (Dependency Injection) ===\n\n// Controllers + Swagger\nbuilder.Services.AddControllers();\nbuilder.Services.AddEndpointsApiExplorer();\nbuilder.Services.AddSwaggerGen();\n\n// Database Context\nbuilder.Services.AddDbContext<AppDbContext>(options =>\n{\n var connStr = builder.Configuration.GetConnectionString(\"DefaultConnection\");\n options.UseSqlServer(connStr);\n});\n\n// Business Services\nbuilder.Services.AddScoped<ITodoService, TodoService>();\n\n// Caching for middleware\nbuilder.Services.AddMemoryCache();\n\n// === 2. Build App ===\nvar app = builder.Build();\n\n// === 3. C?u H?nh Middleware Pipeline ===\nif (app.Environment.IsDevelopment())\n{\n app.UseWebAssemblyDebugging(); // Enable debugging WASM\n app.UseSwagger();\n app.UseSwaggerUI();\n}\n\napp.UseHttpsRedirection();\napp.UseForwardedHeaders(); // X? l? reverse proxy headers\napp.UseRequestClientInfo(); // Custom middleware\n\n// Serve Blazor WASM files\napp.UseBlazorFrameworkFiles();\napp.UseStaticFiles();\n\napp.UseRouting();\napp.MapControllers();\napp.MapFallbackToFile(\"index.html\"); // Client-side routing\n\napp.Run();\n\n\n#### ?? Controller Pattern\n\ncsharp\n[ApiController]\n[Route(\"api/[controller]\")] // Route: /api/todos\npublic class TodosController : ControllerBase\n{\n private readonly ITodoService _service;\n \n // Constructor injection\n public TodosController(ITodoService service)\n {\n _service = service;\n }\n \n // GET /api/todos\n [HttpGet]\n public async Task<ActionResult<IReadOnlyList<TodoItemDto>>> GetAll(\n CancellationToken ct)\n {\n var items = await _service.GetAllAsync(ct);\n return Ok(items); // 200 OK\n }\n \n // GET /api/todos/{id}\n [HttpGet(\"{id:int}\")]\n public async Task<ActionResult<TodoItemDto>> GetById(\n int id, \n CancellationToken ct)\n {\n var item = await _service.GetByIdAsync(id, ct);\n return item is null ? NotFound() : Ok(item); // 404 or 200\n }\n \n // POST /api/todos\n [HttpPost]\n public async Task<ActionResult<TodoItemDto>> Create(\n [FromBody] CreateTodoRequest request,\n CancellationToken ct)\n {\n if (string.IsNullOrWhiteSpace(request.Title))\n return BadRequest(\"Title is required.\"); // 400 Bad Request\n \n var created = await _service.CreateAsync(request, ct);\n \n // 201 Created with Location header\n return CreatedAtAction(nameof(GetById), new { id = created.Id }, created);\n }\n \n // PUT /api/todos/{id}\n [HttpPut(\"{id:int}\")]\n public async Task<ActionResult<TodoItemDto>> Update(\n int id,\n [FromBody] UpdateTodoRequest request,\n CancellationToken ct)\n {\n var updated = await _service.UpdateAsync(id, request, ct);\n return updated is null ? NotFound() : Ok(updated);\n }\n \n // DELETE /api/todos/{id}\n [HttpDelete(\"{id:int}\")]\n public async Task<IActionResult> Delete(int id, CancellationToken ct)\n {\n var ok = await _service.DeleteAsync(id, ct);\n return ok ? NoContent() : NotFound(); // 204 or 404\n }\n}\n\n\nHTTP Status Codes:\n- 200 OK: Thành công, có d? li?u tr? v?\n- 201 Created: T?o m?i thành công\n- 204 No Content: Thành công, không có d? li?u tr? v? (ví d?: DELETE)\n- 400 Bad Request: D? li?u không h?p l?\n- 404 Not Found: Không t?m th?y resource\n\n---\n\n### ?? 5.3. Services Layer (Business Logic)\n\n#### ?? Interface Definition\n\ncsharp\n// ITodoService.cs\npublic interface ITodoService\n{\n Task<IReadOnlyList<TodoItemDto>> GetAllAsync(CancellationToken ct = default);\n Task<TodoItemDto?> GetByIdAsync(int id, CancellationToken ct = default);\n Task<TodoItemDto> CreateAsync(CreateTodoRequest request, CancellationToken ct = default);\n Task<TodoItemDto?> UpdateAsync(int id, UpdateTodoRequest request, CancellationToken ct = default);\n Task<bool> DeleteAsync(int id, CancellationToken ct = default);\n}\n\n\nT?i sao dùng Interface?\n1. Dependency Inversion: Controller ph? thu?c vào interface, không ph?i implementation c? th?\n2. Testing: D? dàng mock/fake cho unit test\n3. Flexibility: Có th? thay ð?i implementation mà không ?nh hý?ng ð?n controller\n\n#### ?? Service Implementation\n\ncsharp\npublic class TodoService : ITodoService\n{\n private readonly AppDbContext _db;\n \n // Constructor injection DbContext\n public TodoService(AppDbContext db)\n {\n _db = db;\n }\n \n public async Task<IReadOnlyList<TodoItemDto>> GetAllAsync(CancellationToken ct)\n {\n return await _db.TodoItems\n .OrderByDescending(x => x.CreatedAt) // M?i nh?t trý?c\n .Select(x => new TodoItemDto( // Map sang DTO\n x.Id, \n x.Title, \n x.IsDone, \n x.CreatedAt\n ))\n .ToListAsync(ct); // Execute query\n }\n \n public async Task<TodoItemDto> CreateAsync(\n CreateTodoRequest request, \n CancellationToken ct)\n {\n // 1. T?o entity\n var entity = new TodoItem\n {\n Title = request.Title.Trim(),\n IsDone = false,\n CreatedAt = DateTime.UtcNow\n };\n \n // 2. Track entity\n db.TodoItems.Add(entity);\n \n // 3. Save to database (COMMIT)\n await db.SaveChangesAsync(ct);\n \n // 4. Return DTO (entity.Id ð? ðý?c fill sau SaveChanges)\n return new TodoItemDto(entity.Id, entity.Title, entity.IsDone, entity.CreatedAt);\n }\n \n public async Task<TodoItemDto?> UpdateAsync(\n int id, \n UpdateTodoRequest request, \n CancellationToken ct)\n {\n // 1. Find entity\n var entity = await db.TodoItems.FirstOrDefaultAsync(x => x.Id == id, ct);\n if (entity is null) return null;\n \n // 2. Update properties\n entity.Title = request.Title.Trim();\n entity.IsDone = request.IsDone;\n \n // 3. Save (EF tracking t? ð?ng detect changes)\n await db.SaveChangesAsync(ct);\n \n // 4. Return DTO\n return new TodoItemDto(entity.Id, entity.Title, entity.IsDone, entity.CreatedAt);\n }\n \n public async Task<bool> DeleteAsync(int id, CancellationToken ct)\n {\n var entity = await db.TodoItems.FirstOrDefaultAsync(x => x.Id == id, ct);\n if (entity is null) return false;\n \n db.TodoItems.Remove(entity);\n await db.SaveChangesAsync(ct);\n return true;\n }\n}\n\n\n---\n\n### ??? 5.4. Data Layer (Entity Framework Core)\n\n#### ?? DbContext Configuration\n\ncsharp\npublic class AppDbContext : DbContext\n{\n // Constructor v?i DbContextOptions\n public AppDbContext(DbContextOptions<AppDbContext> options) : base(options)\n {\n }\n \n // DbSet - Ð?i di?n cho table trong database\n public DbSet<TodoItem> TodoItems => Set<TodoItem>();\n \n // C?u h?nh model (Fluent API)\n protected override void OnModelCreating(ModelBuilder modelBuilder)\n {\n base.OnModelCreating(modelBuilder);\n \n var todo = modelBuilder.Entity<TodoItem>();\n \n // Table name\n todo.ToTable(\"TodoItems\");\n \n // Primary key\n todo.HasKey(x => x.Id);\n \n // Column configurations\n todo.Property(x => x.Title)\n .IsRequired() // NOT NULL\n .HasMaxLength(200); // VARCHAR(200)\n \n todo.Property(x => x.IsDone)\n .HasDefaultValue(false); // DEFAULT 0\n \n todo.Property(x => x.CreatedAt)\n .HasDefaultValueSql(\"GETUTCDATE()\"); // DEFAULT GETUTCDATE()\n }\n}\n\n\nFluent API vs Data Annotations:\n\ncsharp\n// Cách 1: Fluent API (khuy?n khích)\nmodelBuilder.Entity<TodoItem>()\n .Property(x => x.Title)\n .IsRequired()\n .HasMaxLength(200);\n\n// Cách 2: Data Annotations\npublic class TodoItem\n{\n [Required]\n [MaxLength(200)]\n public string Title { get; set; }\n}\n\n\n---\n\n### ?? 5.5. Shared Layer (Common Code)\n\n#### ?? Entity (Database Model)\n\ncsharp\n// Shared/Entities/Table/TodoItem.cs\npublic class TodoItem\n{\n public int Id { get; set; } // Primary Key (Identity)\n public required string Title { get; set; } // NOT NULL\n public bool IsDone { get; set; } // Default: false\n public DateTime CreatedAt { get; set; } = DateTime.UtcNow;\n}\n\n\n#### ?? DTOs (Data Transfer Objects)\n\ncsharp\n// Shared/Entities/Dtos/TodoItemDto.cs\n\n// Read DTO - Tr? v? cho client\npublic record TodoItemDto(\n int Id,\n string Title,\n bool IsDone,\n DateTime CreatedAt\n);\n\n// Create DTO - Nh?n t? client khi t?o m?i\npublic record CreateTodoRequest(string Title);\n\n// Update DTO - Nh?n t? client khi update\npublic record UpdateTodoRequest(string Title, bool IsDone);\n\n\nT?i sao dùng DTO?\n1. Separation of Concerns: Entity dùng cho database, DTO dùng cho API\n2. Security: Không expose toàn b? entity ra ngoài\n3. Flexibility: DTO có th? khác v?i entity structure\n4. Validation: Validate DTO riêng, không ?nh hý?ng entity\n\nRecord vs Class:\n- record: Immutable, value-based equality, concise syntax\n- class: Mutable, reference-based equality\n\n---\n\n## 6. Cách Code Theo Quy Chu?n\n\n### ?? 6.1. Quy T?c Ð?t Tên\n\ncsharp\n// ? ÐÚNG\npublic class TodoService { } // PascalCase cho class\npublic interface ITodoService { } // Interface b?t ð?u b?ng \"I\"\npublic async Task CreateAsync() { } // Async methods k?t thúc b?ng \"Async\"\nprivate readonly AppDbContext _db; // Private fields b?t ð?u b?ng \"_\"\npublic int Id { get; set; } // Properties: PascalCase\nprivate string? newTitle; // Variables: camelCase\n\n// ? SAI\npublic class todoservice { } // Không dùng lowercase\npublic interface TodoService { } // Interface ph?i có \"I\"\npublic async Task Create() { } // Thi?u \"Async\"\nprivate AppDbContext db; // Private field thi?u \"_\"\n\n\n### ??? 6.2. Pattern: Repository Service\n\nKhi nào t?o Service m?i?\n- M?i entity chính (domain model) ? 1 service\n- Ví d?: TodoItem ? ITodoService + TodoService\n\nCác bý?c t?o feature m?i:\n\n#### Bý?c 1: T?o Entity\ncsharp\n// Shared/Entities/Table/Product.cs\npublic class Product\n{\n public int Id { get; set; }\n public required string Name { get; set; }\n public decimal Price { get; set; }\n public DateTime CreatedAt { get; set; }\n}\n\n\n#### Bý?c 2: T?o DTOs\ncsharp\n// Shared/Entities/Dtos/ProductDto.cs\npublic record ProductDto(int Id, string Name, decimal Price, DateTime CreatedAt);\npublic record CreateProductRequest(string Name, decimal Price);\npublic record UpdateProductRequest(string Name, decimal Price);\n\n\n#### Bý?c 3: Update DbContext\ncsharp\n// Data/AppDbContext.cs\npublic DbSet<Product> Products => Set<Product>();\n\nprotected override void OnModelCreating(ModelBuilder modelBuilder)\n{\n // ... existing code ...\n \n var product = modelBuilder.Entity<Product>();\n product.ToTable(\"Products\");\n product.HasKey(x => x.Id);\n product.Property(x => x.Name).IsRequired().HasMaxLength(100);\n product.Property(x => x.Price).HasColumnType(\"decimal(18,2)\");\n}\n\n\n#### Bý?c 4: T?o Migration\nbash\n# Ch?y t? thý m?c Data/\ndotnet ef migrations add AddProductTable --startup-project ../Server\ndotnet ef database update --startup-project ../Server\n\n\n#### Bý?c 5: T?o Service Interface\ncsharp\n// Services/Interfaces/IProductService.cs\npublic interface IProductService\n{\n Task<IReadOnlyList<ProductDto>> GetAllAsync(CancellationToken ct = default);\n Task<ProductDto?> GetByIdAsync(int id, CancellationToken ct = default);\n Task<ProductDto> CreateAsync(CreateProductRequest request, CancellationToken ct = default);\n Task<ProductDto?> UpdateAsync(int id, UpdateProductRequest request, CancellationToken ct = default);\n Task<bool> DeleteAsync(int id, CancellationToken ct = default);\n}\n\n\n#### Bý?c 6: Implement Service\ncsharp\n// Services/Implements/ProductService.cs\npublic class ProductService : IProductService\n{\n private readonly AppDbContext _db;\n \n public ProductService(AppDbContext db)\n {\n _db = db;\n }\n \n public async Task<IReadOnlyList<ProductDto>> GetAllAsync(CancellationToken ct)\n {\n return await _db.Products\n .OrderByDescending(x => x.CreatedAt)\n .Select(x => new ProductDto(x.Id, x.Name, x.Price, x.CreatedAt))\n .ToListAsync(ct);\n }\n \n // ... implement các methods khác týõng t? TodoService\n}\n\n\n#### Bý?c 7: Ðãng K? Service DI\ncsharp\n// Server/Program.cs\nbuilder.Services.AddScoped<IProductService, ProductService>();\n\n\n#### Bý?c 8: T?o Controller\ncsharp\n// Server/Controllers/ProductsController.cs\n[ApiController]\n[Route(\"api/[controller]\")]\npublic class ProductsController : ControllerBase\n{\n private readonly IProductService _service;\n \n public ProductsController(IProductService service)\n {\n _service = service;\n }\n \n [HttpGet]\n public async Task<ActionResult<IReadOnlyList<ProductDto>>> GetAll(CancellationToken ct)\n => Ok(await _service.GetAllAsync(ct));\n \n // ... implement các endpoints khác\n}\n\n\n#### Bý?c 9: T?o Razor Page\nrazor\n@* Client/Pages/Products.razor *@\n@page \"/products\"\n@inject HttpClient Http\n@using Shared.Entities.Dtos\n\n<h3>Products</h3>\n\n<div class=\"mb-3\">\n <input class=\"form-control\" @bind=\"newName\" placeholder=\"Product name\"/>\n <input class=\"form-control\" type=\"number\" @bind=\"newPrice\" placeholder=\"Price\"/>\n <button class=\"btn btn-primary\" @onclick=\"AddAsync\">Add</button>\n</div>\n\n@if (loading)\n{\n <p>Loading...</p>\n}\nelse if (products is null || products.Count == 0)\n{\n <p>No products.</p>\n}\nelse\n{\n <table class=\"table\">\n <thead>\n <tr>\n <th>Name</th>\n <th>Price</th>\n <th>Created</th>\n <th>Actions</th>\n </tr>\n </thead>\n <tbody>\n @foreach (var p in products)\n {\n <tr>\n <td>@p.Name</td>\n <td>@p.Price.ToString(\"C\")</td>\n <td>@p.CreatedAt.ToShortDateString()</td>\n <td>\n <button class=\"btn btn-sm btn-danger\" \n @onclick=\"() => DeleteAsync(p.Id)\">Delete</button>\n </td>\n </tr>\n }\n </tbody>\n </table>\n}\n\n@code {\n private List<ProductDto> products = new();\n private string? newName;\n private decimal newPrice;\n private bool loading;\n \n protected override async Task OnInitializedAsync()\n {\n await LoadAsync();\n }\n \n private async Task LoadAsync()\n {\n loading = true;\n try\n {\n var data = await Http.GetFromJsonAsync<List<ProductDto>>(\"api/products\");\n products = data ?? [];\n }\n finally\n {\n loading = false;\n }\n }\n \n private async Task AddAsync()\n {\n if (string.IsNullOrWhiteSpace(newName)) return;\n \n var req = new CreateProductRequest(newName, newPrice);\n var res = await Http.PostAsJsonAsync(\"api/products\", req);\n \n if (res.IsSuccessStatusCode)\n {\n await LoadAsync();\n newName = string.Empty;\n newPrice = 0;\n }\n }\n \n private async Task DeleteAsync(int id)\n {\n var res = await Http.DeleteAsync($\"api/products/{id}\");\n if (res.IsSuccessStatusCode)\n {\n products.RemoveAll(x => x.Id == id);\n }\n }\n}\n\n\n#### Bý?c 10: Thêm vào Navigation\nrazor\n@* Client/Layout/NavMenu.razor *@\n<div class=\"nav-item px-3\">\n <NavLink class=\"nav-link\" href=\"products\">\n <span class=\"bi bi-box-nav-menu\" aria-hidden=\"true\"></span> Products\n </NavLink>\n</div>\n\n\n---\n\n### ?? 6.3. Best Practices\n\n#### ?? Async/Await\n\ncsharp\n// ? ÐÚNG\npublic async Task<List<TodoItemDto>> GetAllAsync()\n{\n return await _db.TodoItems.ToListAsync();\n}\n\n// ? SAI - Blocking call\npublic List<TodoItemDto> GetAll()\n{\n return _db.TodoItems.ToList(); // Sync method blocks thread\n}\n\n// ? SAI - Unnecessary async\npublic async Task<int> GetCountAsync()\n{\n return await Task.FromResult(5); // Không c?n thi?t\n}\n\n// ? ÐÚNG - Sync method cho simple operations\npublic int GetCount()\n{\n return 5;\n}\n\n\n#### ??? Null Safety\n\ncsharp\n// ? ÐÚNG - Enable nullable reference types\n#nullable enable\n\npublic class TodoService\n{\n private readonly AppDbContext _db; // Never null\n private string? _cache; // Nullable\n \n public TodoService(AppDbContext db)\n {\n _db = db ?? throw new ArgumentNullException(nameof(db));\n }\n \n public async Task<TodoItemDto?> GetByIdAsync(int id) // Return type nullable\n {\n var entity = await _db.TodoItems.FirstOrDefaultAsync(x => x.Id == id);\n return entity is null ? null : MapToDto(entity);\n }\n}\n\n// ? SAI - Không handle null\npublic TodoItemDto GetById(int id)\n{\n var entity = _db.TodoItems.FirstOrDefault(x => x.Id == id);\n return MapToDto(entity); // NullReferenceException n?u entity null!\n}\n\n\n#### ?? Using Statements & IDisposable\n\ncsharp\n// ? ÐÚNG - Auto dispose\npublic async Task ProcessFileAsync(string path)\n{\n using var stream = File.OpenRead(path);\n // ... work with stream\n // stream.Dispose() t? ð?ng ðý?c g?i\n}\n\n// ? SAI - Forgot to dispose\npublic async Task ProcessFileAsync(string path)\n{\n var stream = File.OpenRead(path);\n // ... work with stream\n // Memory leak!\n}\n\n\n#### ?? Dependency Injection\n\ncsharp\n// ? ÐÚNG - Constructor injection\npublic class TodosController : ControllerBase\n{\n private readonly ITodoService _service;\n \n public TodosController(ITodoService service)\n {\n _service = service;\n }\n}\n\n// ? SAI - Service Locator anti-pattern\npublic class TodosController : ControllerBase\n{\n public TodosController()\n {\n var service = ServiceProvider.GetService<ITodoService>(); // ??\n }\n}\n\n// ? SAI - new keyword\npublic class TodosController : ControllerBase\n{\n private readonly ITodoService _service = new TodoService(); // ??\n}\n\n\n---\n\n## 7. Th?c Hành: Thêm Ch?c Nãng M?i\n\n### ?? Bài T?p: T?o Category Management\n\nT?o tính nãng qu?n l? danh m?c s?n ph?m v?i các yêu c?u:\n- Entity: Category (Id, Name, Description, CreatedAt)\n- CRUD ð?y ð?\n- UI ð? qu?n l?\n\n### ?? Gi?i Chi Ti?t\n\n#### 1?? T?o Entity\ncsharp\n// Shared/Entities/Table/Category.cs\nnamespace Shared.Entities.Table;\n\npublic class Category\n{\n public int Id { get; set; }\n public required string Name { get; set; }\n public string? Description { get; set; }\n public DateTime CreatedAt { get; set; } = DateTime.UtcNow;\n}\n\n\n#### 2?? T?o DTOs\ncsharp\n// Shared/Entities/Dtos/CategoryDto.cs\nnamespace Shared.Entities.Dtos;\n\npublic record CategoryDto(\n int Id,\n string Name,\n string? Description,\n DateTime CreatedAt\n);\n\npublic record CreateCategoryRequest(string Name, string? Description);\npublic record UpdateCategoryRequest(string Name, string? Description);\n\n\n#### 3?? Update DbContext\ncsharp\n// Data/AppDbContext.cs\npublic DbSet<Category> Categories => Set<Category>();\n\nprotected override void OnModelCreating(ModelBuilder modelBuilder)\n{\n base.OnModelCreating(modelBuilder);\n \n // ... existing configurations ...\n \n var category = modelBuilder.Entity<Category>();\n category.ToTable(\"Categories\");\n category.HasKey(x => x.Id);\n category.Property(x => x.Name).IsRequired().HasMaxLength(100);\n category.Property(x => x.Description).HasMaxLength(500);\n category.Property(x => x.CreatedAt).HasDefaultValueSql(\"GETUTCDATE()\");\n}\n\n\n#### 4?? T?o Migration và Update Database\nbash\ncd Data\ndotnet ef migrations add AddCategoryTable --startup-project ../Server\ndotnet ef database update --startup-project ../Server\n\n\n#### 5?? T?o Interface\ncsharp\n// Services/Interfaces/ICategoryService.cs\nnamespace Services.Interfaces;\n\npublic interface ICategoryService\n{\n Task<IReadOnlyList<CategoryDto>> GetAllAsync(CancellationToken ct = default);\n Task<CategoryDto?> GetByIdAsync(int id, CancellationToken ct = default);\n Task<CategoryDto> CreateAsync(CreateCategoryRequest request, CancellationToken ct = default);\n Task<CategoryDto?> UpdateAsync(int id, UpdateCategoryRequest request, CancellationToken ct = default);\n Task<bool> DeleteAsync(int id, CancellationToken ct = default);\n}\n\n\n#### 6?? Implement Service\ncsharp\n// Services/Implements/CategoryService.cs\nusing Data;\nusing Microsoft.EntityFrameworkCore;\nusing Services.Interfaces;\nusing Shared.Entities.Dtos;\nusing Shared.Entities.Table;\n\nnamespace Services.Implements;\n\npublic class CategoryService : ICategoryService\n{\n private readonly AppDbContext _db;\n \n public CategoryService(AppDbContext db)\n {\n _db = db;\n }\n \n public async Task<IReadOnlyList<CategoryDto>> GetAllAsync(CancellationToken ct = default)\n {\n return await _db.Categories\n .OrderBy(x => x.Name)\n .Select(x => new CategoryDto(x.Id, x.Name, x.Description, x.CreatedAt))\n .ToListAsync(ct);\n }\n \n public async Task<CategoryDto?> GetByIdAsync(int id, CancellationToken ct = default)\n {\n return await _db.Categories\n .Where(x => x.Id == id)\n .Select(x => new CategoryDto(x.Id, x.Name, x.Description, x.CreatedAt))\n .FirstOrDefaultAsync(ct);\n }\n \n public async Task<CategoryDto> CreateAsync(CreateCategoryRequest request, CancellationToken ct = default)\n {\n var entity = new Category\n {\n Name = request.Name.Trim(),\n Description = request.Description?.Trim(),\n CreatedAt = DateTime.UtcNow\n };\n \n _db.Categories.Add(entity);\n await _db.SaveChangesAsync(ct);\n \n return new CategoryDto(entity.Id, entity.Name, entity.Description, entity.CreatedAt);\n }\n \n public async Task<CategoryDto?> UpdateAsync(int id, UpdateCategoryRequest request, CancellationToken ct = default)\n {\n var entity = await _db.Categories.FirstOrDefaultAsync(x => x.Id == id, ct);\n if (entity is null) return null;\n \n entity.Name = request.Name.Trim();\n entity.Description = request.Description?.Trim();\n \n await _db.SaveChangesAsync(ct);\n \n return new CategoryDto(entity.Id, entity.Name, entity.Description, entity.CreatedAt);\n }\n \n public async Task<bool> DeleteAsync(int id, CancellationToken ct = default)\n {\n var entity = await _db.Categories.FirstOrDefaultAsync(x => x.Id == id, ct);\n if (entity is null) return false;\n \n _db.Categories.Remove(entity);\n await _db.SaveChangesAsync(ct);\n return true;\n }\n}\n\n\n#### 7?? Ðãng K? DI\ncsharp\n// Server/Program.cs\nbuilder.Services.AddScoped<ICategoryService, CategoryService>();\n\n\n#### 8?? T?o Controller\ncsharp\n// Server/Controllers/CategoriesController.cs\nusing Microsoft.AspNetCore.Mvc;\nusing Services.Interfaces;\nusing Shared.Entities.Dtos;\n\nnamespace Server.Controllers;\n\n[ApiController]\n[Route(\"api/[controller]\")]\npublic class CategoriesController : ControllerBase\n{\n private readonly ICategoryService _service;\n \n public CategoriesController(ICategoryService service)\n {\n _service = service;\n }\n \n [HttpGet]\n public async Task<ActionResult<IReadOnlyList<CategoryDto>>> GetAll(CancellationToken ct)\n => Ok(await _service.GetAllAsync(ct));\n \n [HttpGet(\"{id:int}\")]\n public async Task<ActionResult<CategoryDto>> GetById(int id, CancellationToken ct)\n {\n var item = await _service.GetByIdAsync(id, ct);\n return item is null ? NotFound() : Ok(item);\n }\n \n [HttpPost]\n public async Task<ActionResult<CategoryDto>> Create([FromBody] CreateCategoryRequest request, CancellationToken ct)\n {\n if (string.IsNullOrWhiteSpace(request.Name))\n return BadRequest(\"Name is required.\");\n \n var created = await _service.CreateAsync(request, ct);\n return CreatedAtAction(nameof(GetById), new { id = created.Id }, created);\n }\n \n [HttpPut(\"{id:int}\")]\n public async Task<ActionResult<CategoryDto>> Update(int id, [FromBody] UpdateCategoryRequest request, CancellationToken ct)\n {\n var updated = await _service.UpdateAsync(id, request, ct);\n return updated is null ? NotFound() : Ok(updated);\n }\n \n [HttpDelete(\"{id:int}\")]\n public async Task<IActionResult> Delete(int id, CancellationToken ct)\n {\n var ok = await _service.DeleteAsync(id, ct);\n return ok ? NoContent() : NotFound();\n }\n}\n\n\n#### 9?? T?o Razor Page\nrazor\n@* Client/Pages/Categories.razor *@\n@page \"/categories\"\n@inject HttpClient Http\n@using Shared.Entities.Dtos\n\n<h3>Categories</h3>\n\n<div class=\"card mb-3\">\n <div class=\"card-body\">\n <h5>@(editingId.HasValue ? \"Edit Category\" : \"Add New Category\")</h5>\n <div class=\"mb-2\">\n <input class=\"form-control\" @bind=\"formName\" placeholder=\"Category name...\" />\n </div>\n <div class=\"mb-2\">\n <textarea class=\"form-control\" @bind=\"formDescription\" placeholder=\"Description (optional)...\" rows=\"3\"></textarea>\n </div>\n <div>\n <button class=\"btn btn-primary\" @onclick=\"SaveAsync\" disabled=\"@string.IsNullOrWhiteSpace(formName)\">\n @(editingId.HasValue ? \"Update\" : \"Add\")\n </button>\n @if (editingId.HasValue)\n {\n <button class=\"btn btn-secondary\" @onclick=\"CancelEdit\">Cancel</button>\n }\n </div>\n </div>\n</div>\n\n@if (loading)\n{\n <div class=\"text-center\">\n <div class=\"spinner-border\" role=\"status\">\n <span class=\"visually-hidden\">Loading...</span>\n </div>\n </div>\n}\nelse if (categories is null || categories.Count == 0)\n{\n <div class=\"alert alert-info\">No categories yet. Add one above!</div>\n}\nelse\n{\n <div class=\"row\">\n @foreach (var cat in categories)\n {\n <div class=\"col-md-4 mb-3\">\n <div class=\"card\">\n <div class=\"card-body\">\n <h5 class=\"card-title\">@cat.Name</h5>\n <p class=\"card-text\">@(cat.Description ?? \"No description\")</p>\n <p class=\"text-muted small\">Created: @cat.CreatedAt.ToShortDateString()</p>\n <button class=\"btn btn-sm btn-outline-primary\" @onclick=\"() => EditAsync(cat)\">Edit</button>\n <button class=\"btn btn-sm btn-outline-danger\" @onclick=\"() => DeleteAsync(cat.Id)\">Delete</button>\n </div>\n </div>\n </div>\n }\n </div>\n}\n\n@code {\n private List<CategoryDto> categories = new();\n private string? formName;\n private string? formDescription;\n private int? editingId;\n private bool loading;\n \n protected override async Task OnInitializedAsync()\n {\n await LoadAsync();\n }\n \n private async Task LoadAsync()\n {\n loading = true;\n try\n {\n var data = await Http.GetFromJsonAsync<List<CategoryDto>>(\"api/categories\");\n categories = data ?? [];\n }\n finally\n {\n loading = false;\n }\n }\n \n private async Task SaveAsync()\n {\n if (string.IsNullOrWhiteSpace(formName)) return;\n \n if (editingId.HasValue)\n {\n // Update\n var req = new UpdateCategoryRequest(formName, formDescription);\n var res = await Http.PutAsJsonAsync($\"api/categories/{editingId.Value}\", req);\n if (res.IsSuccessStatusCode)\n {\n await LoadAsync();\n CancelEdit();\n }\n }\n else\n {\n // Create\n var req = new CreateCategoryRequest(formName, formDescription);\n var res = await Http.PostAsJsonAsync(\"api/categories\", req);\n if (res.IsSuccessStatusCode)\n {\n await LoadAsync();\n formName = string.Empty;\n formDescription = string.Empty;\n }\n }\n }\n \n private void EditAsync(CategoryDto cat)\n {\n editingId = cat.Id;\n formName = cat.Name;\n formDescription = cat.Description;\n }\n \n private void CancelEdit()\n {\n editingId = null;\n formName = string.Empty;\n formDescription = string.Empty;\n }\n \n private async Task DeleteAsync(int id)\n {\n if (!await JSRuntime.InvokeAsync<bool>(\"confirm\", \"Are you sure?\"))\n return;\n \n var res = await Http.DeleteAsync($\"api/categories/{id}\");\n if (res.IsSuccessStatusCode)\n {\n categories.RemoveAll(x => x.Id == id);\n }\n }\n}\n\n\nLýu ?: C?n inject IJSRuntime ð? dùng confirm dialog:\nrazor\n@inject IJSRuntime JSRuntime\n\n\n#### ?? Update Navigation\nrazor\n@* Client/Layout/NavMenu.razor *@\n<div class=\"nav-item px-3\">\n <NavLink class=\"nav-link\" href=\"categories\">\n <span class=\"bi bi-folder-nav-menu\" aria-hidden=\"true\"></span> Categories\n </NavLink>\n</div>\n\n\n---\n\n## 8. Tips & Best Practices\n\n### ?? Performance Tips\n\n#### 1. Use AsNoTracking for Read-Only Queries\ncsharp\n// ? Faster for read-only\npublic async Task<List<TodoItemDto>> GetAllAsync()\n{\n return await _db.TodoItems\n .AsNoTracking() // Không track changes\n .Select(x => new TodoItemDto(...))\n .ToListAsync();\n}\n\n// ? Slower - tracks entities unnecessarily\npublic async Task<List<TodoItem>> GetAllAsync()\n{\n return await _db.TodoItems.ToListAsync(); // EF tracks all entities\n}\n\n\n#### 2. Project to DTO in Database\ncsharp\n// ? ÐÚNG - Project in database\nreturn await _db.TodoItems\n .Select(x => new TodoItemDto(x.Id, x.Title, x.IsDone, x.CreatedAt))\n .ToListAsync();\n// SQL: SELECT Id, Title, IsDone, CreatedAt FROM TodoItems\n\n// ? SAI - Fetch all columns then project in memory\nvar items = await _db.TodoItems.ToListAsync();\nreturn items.Select(x => new TodoItemDto(...)).ToList();\n// SQL: SELECT * FROM TodoItems (l?y t?t c? columns)\n\n\n#### 3. Use Compiled Queries for Repeated Queries\ncsharp\nprivate static readonly Func<AppDbContext, int, Task<TodoItem?>> GetByIdCompiled =\n EF.CompileAsyncQuery((AppDbContext db, int id) =>\n db.TodoItems.FirstOrDefault(x => x.Id == id));\n\npublic async Task<TodoItem?> GetByIdAsync(int id)\n{\n return await GetByIdCompiled(_db, id); // Faster!\n}\n\n\n### ?? Security Best Practices\n\n#### 1. Input Validation\ncsharp\n[HttpPost]\npublic async Task<ActionResult> Create([FromBody] CreateTodoRequest request)\n{\n // Validate\n if (string.IsNullOrWhiteSpace(request.Title))\n return BadRequest(\"Title is required.\");\n \n if (request.Title.Length > 200)\n return BadRequest(\"Title too long.\");\n \n // Sanitize\n var cleanTitle = request.Title.Trim();\n \n // Process...\n}\n\n\n#### 2. Use DTOs, Not Entities\ncsharp\n// ? SAI - Expose entity\n[HttpGet]\npublic async Task<List<TodoItem>> GetAll()\n{\n return await _db.TodoItems.ToListAsync(); // Expose database structure!\n}\n\n// ? ÐÚNG - Use DTO\n[HttpGet]\npublic async Task<List<TodoItemDto>> GetAll()\n{\n return await _db.TodoItems\n .Select(x => new TodoItemDto(...))\n .ToListAsync();\n}\n\n\n#### 3. Use HTTPS\ncsharp\n// Program.cs\nif (!app.Environment.IsDevelopment())\n{\n app.UseHttpsRedirection(); // Force HTTPS in production\n}\n\n\n### ?? Testing Tips\n\n#### Unit Test Service\ncsharp\npublic class TodoServiceTests\n{\n [Fact]\n public async Task CreateAsync_ValidInput_ReturnsDto()\n {\n // Arrange\n var options = new DbContextOptionsBuilder<AppDbContext>()\n .UseInMemoryDatabase(\"TestDb\")\n .Options;\n \n using var db = new AppDbContext(options);\n var service = new TodoService(db);\n var request = new CreateTodoRequest(\"Test\");\n \n // Act\n var result = await service.CreateAsync(request);\n \n // Assert\n Assert.NotNull(result);\n Assert.Equal(\"Test\", result.Title);\n Assert.False(result.IsDone);\n }\n}\n\n\n### ?? Logging\n\ncsharp\npublic class TodoService : ITodoService\n{\n private readonly AppDbContext _db;\n private readonly ILogger<TodoService> _logger;\n \n public TodoService(AppDbContext db, ILogger<TodoService> logger)\n {\n _db = db;\n _logger = logger;\n }\n \n public async Task<TodoItemDto> CreateAsync(CreateTodoRequest request, CancellationToken ct)\n {\n _logger.LogInformation(\"Creating todo: {Title}\", request.Title);\n \n try\n {\n var entity = new TodoItem { Title = request.Title.Trim() };\n _db.TodoItems.Add(entity);\n await _db.SaveChangesAsync(ct);\n \n _logger.LogInformation(\"Created todo with Id: {Id}\", entity.Id);\n return new TodoItemDto(entity.Id, entity.Title, entity.IsDone, entity.CreatedAt);\n }\n catch (Exception ex)\n {\n _logger.LogError(ex, \"Error creating todo: {Title}\", request.Title);\n throw;\n }\n }\n}\n\n\n### ?? UI/UX Tips\n\n#### Loading States\nrazor\n@if (loading)\n{\n <div class=\"d-flex justify-content-center\">\n <div class=\"spinner-border\" role=\"status\">\n <span class=\"visually-hidden\">Loading...</span>\n </div>\n </div>\n}\nelse if (items is null || items.Count == 0)\n{\n <div class=\"alert alert-info\">No items found.</div>\n}\nelse\n{\n @* Display items *@\n}\n\n\n#### Error Handling\nrazor\n@code {\n private string? errorMessage;\n \n private async Task LoadAsync()\n {\n try\n {\n errorMessage = null;\n loading = true;\n var data = await Http.GetFromJsonAsync<List<TodoItemDto>>(\"api/todos\");\n todos = data ?? [];\n }\n catch (HttpRequestException ex)\n {\n errorMessage = \"Failed to load todos. Please try again.\";\n _logger.LogError(ex, \"Error loading todos\");\n }\n finally\n {\n loading = false;\n }\n }\n}\n\n@* In markup *@\n@if (!string.IsNullOrEmpty(errorMessage))\n{\n <div class=\"alert alert-danger\" role=\"alert\">\n @errorMessage\n </div>\n}\n\n\n### ?? Useful Resources\n\n- Blazor Documentation\n- EF Core Documentation\n- ASP.NET Core Best Practices\n- C# Coding Conventions\n\n---\n\n## ?? T?ng K?t\n\n### ? Checklist Khi T?o Feature M?i\n\n- [ ] T?o Entity trong Shared/Entities/Table/\n- [ ] T?o DTOs trong Shared/Entities/Dtos/\n- [ ] Update AppDbContext (DbSet + OnModelCreating)\n- [ ] T?o Migration và Update Database\n- [ ] T?o Interface trong Services/Interfaces/\n- [ ] Implement Service trong Services/Implements/\n- [ ] Ðãng k? DI trong Server/Program.cs\n- [ ] T?o Controller trong Server/Controllers/\n- [ ] T?o Razor Page trong Client/Pages/\n- [ ] Update Navigation trong NavMenu.razor\n- [ ] Test API b?ng Swagger\n- [ ] Test UI trên browser\n\n### ?? Key Takeaways\n\n1. Separation of Concerns: M?i layer có trách nhi?m riêng\n2. Dependency Injection: S? d?ng DI cho loose coupling\n3. Async/Await: Luôn dùng async cho I/O operations\n4. DTOs: Không expose entities ra ngoài\n5. Clean Code: Follow naming conventions và best practices\n\n---\n\n**?? Document Version:** 1.0 \n**?? Last Updated:** 2024-01-15 \n**?? Author:** AI Assistant \n**?? Support:** GitHub Issues\n\n---\n\nHappy Coding! ??\n"