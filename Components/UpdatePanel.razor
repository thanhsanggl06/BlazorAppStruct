@* UpdatePanel - Japanese style form component based on specification *@
@namespace Components

<div class="up-root">
  <div class="up-header">????</div>
  <div class="up-box">
    <form @onsubmit="SearchAsync" @onsubmit:preventDefault="true">
      <table class="up-form-table">
        <tr>
          <th>????</th>
          <td>
            <input type="checkbox" @bind="newArrivalFast" class="up-checkbox" />
            <select class="up-select" @bind="selectedCategory" disabled="@(!newArrivalFast)">
              @foreach (var c in Categories) { <option value="@c">@c</option> }
            </select>
          </td>
        </tr>
        <tr>
          <th>????</th>
          <td>
            <span class="up-label">?</span>
            <select class="up-select-year" @bind="selectedYear">
              @foreach (var y in YearOptions) { <option value="@y">@y</option> }
            </select>
            <span class="up-label">?</span>
            <select class="up-select-month" @bind="selectedMonth">
              @foreach (var m in MonthOptions) { <option value="@m">@m</option> }
            </select>
          </td>
        </tr>
        <tr>
          <th>?????</th>
          <td>
            <select class="up-select-wide" @bind="selectedSupplierCategory">
              @foreach (var s in SupplierCategories) { <option value="@s">@s</option> }
            </select>
            <div class="up-input-row">
              <input type="text" class="up-input" @bind="supplierInput" placeholder="" />
            </div>
          </td>
        </tr>
        <tr>
          <th>????</th>
          <td>
            <select class="up-select-wide" @bind="selectedOrderCompany">
              @foreach (var o in OrderCompanies) { <option value="@o">@o</option> }
            </select>
          </td>
        </tr>
        <tr>
          <th>???</th>
          <td>
            <select class="up-select-wide" @bind="selectedDeliveryDestination">
              @foreach (var d in DeliveryDestinations) { <option value="@d">@d</option> }
            </select>
          </td>
        </tr>
      </table>
      
      <div class="up-button-row">
        <button type="submit" class="up-btn-search">??</button>
      </div>
    </form>
  </div>
</div>

@code {
  [Parameter] public EventCallback<SearchCondition> OnSearch { get; set; }

  private bool newArrivalFast = false;
  private string? selectedCategory;
  private int selectedYear;
  private int selectedMonth;
  private string? selectedSupplierCategory;
  private string? supplierInput = string.Empty;
  private string? selectedOrderCompany;
  private string? selectedDeliveryDestination;

  private List<string> Categories { get; } = new() { "??", "????A", "????B", "????C" };
  private List<int> YearOptions { get; } = new() { 2012, 2013, 2014, 2015, 2016 };
  private List<int> MonthOptions { get; } = Enumerable.Range(1, 12).ToList();
  private List<string> SupplierCategories { get; } = new() { "???", "??A", "??B", "??C" };
  private List<string> OrderCompanies { get; } = new() { "???", "??A", "??B" };
  private List<string> DeliveryDestinations { get; } = new() { "?×???????", "???A", "???B" };

  protected override void OnInitialized()
  {
    selectedCategory = Categories.First();
    selectedYear = 2012;
    selectedMonth = 3;
    selectedSupplierCategory = SupplierCategories.First();
    selectedOrderCompany = OrderCompanies.First();
    selectedDeliveryDestination = DeliveryDestinations.First();
  }

  private async Task SearchAsync()
  {
    var condition = new SearchCondition(
      newArrivalFast,
      selectedCategory,
      selectedYear,
      selectedMonth,
      selectedSupplierCategory,
      supplierInput,
      selectedOrderCompany,
      selectedDeliveryDestination
    );
    if (OnSearch.HasDelegate) await OnSearch.InvokeAsync(condition);
  }

  public record SearchCondition(
    bool NewArrivalFast,
    string? Category,
    int Year,
    int Month,
    string? SupplierCategory,
    string? SupplierInput,
    string? OrderCompany,
    string? DeliveryDestination
  );
}

<style>
/* Root container */
.up-root {
  font-family: "MS Gothic", "Yu Gothic UI", "Meiryo", sans-serif;
  font-size: 13px;
  max-width: 800px;
  background: #f5f5f5;
}

/* Header */
.up-header {
  background: #d4e8ff;
  padding: 6px 10px;
  font-weight: 600;
  border: 1px solid #888;
  color: #000;
  font-size: 14px;
}

/* Box styling */
.up-box {
  border: 1px solid #888;
  border-top: none;
  background: #fff;
  padding: 10px;
}

/* Form table layout */
.up-form-table {
  width: 100%;
  border-collapse: collapse;
  margin-bottom: 8px;
}

.up-form-table th {
  width: 140px;
  text-align: right;
  padding: 8px 10px;
  font-weight: 600;
  background: #e8f0ff;
  border: 1px solid #ccc;
  color: #000;
  font-size: 13px;
  vertical-align: middle;
}

.up-form-table td {
  padding: 8px 10px;
  border: 1px solid #ccc;
  background: #ffffff;
  vertical-align: middle;
}

/* Form controls */
.up-checkbox {
  margin-right: 8px;
  vertical-align: middle;
  width: 16px;
  height: 16px;
}

.up-select,
.up-select-year,
.up-select-month,
.up-select-wide {
  height: 26px;
  font-size: 13px;
  padding: 2px 6px 2px 24px;
  border: 1px solid #999;
  font-family: "MS Gothic", "Yu Gothic UI", monospace;
  background: #fff;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%23333' d='M2 4l4 4 4-4z'/%3E%3C/svg%3E");
  background-repeat: no-repeat;
  background-position: 6px center;
  background-size: 12px 12px;
  appearance: none;
  -webkit-appearance: none;
  -moz-appearance: none;
}

.up-select {
  width: 220px;
}

.up-select-year {
  width: 90px;
  padding-left: 24px;
}

.up-select-month {
  width: 70px;
  padding-left: 24px;
}

.up-select-wide {
  width: 100%;
  max-width: 550px;
}

.up-label {
  margin: 0 6px;
  font-size: 13px;
  font-weight: 400;
}

/* Input row for additional text input */
.up-input-row {
  margin-top: 6px;
}

.up-input {
  width: 100%;
  max-width: 380px;
  height: 24px;
  font-size: 13px;
  padding: 2px 6px;
  border: 1px solid #999;
  font-family: "MS Gothic", "Yu Gothic UI", monospace;
  background: #fff;
}

/* Button row */
.up-button-row {
  text-align: right;
  padding: 10px 0 5px 0;
}

.up-btn-search {
  background: linear-gradient(to bottom, #f5f5f5 0%, #e5e5e5 100%);
  border: 1px solid #999;
  padding: 6px 40px;
  font-size: 13px;
  color: #000;
  cursor: pointer;
  font-weight: 500;
  border-radius: 3px;
  box-shadow: 0 1px 2px rgba(0,0,0,0.1);
}

.up-btn-search:hover {
  background: linear-gradient(to bottom, #e5e5e5 0%, #d5d5d5 100%);
}

.up-btn-search:active {
  background: #d5d5d5;
  box-shadow: inset 0 1px 2px rgba(0,0,0,0.2);
}
</style>
